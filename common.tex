% use polish by default - feel free to change ;)
\usepackage{polski}
\usepackage[utf8]{inputenc}
\usepackage[OT4]{fontenc}
\usepackage{times}
%\usepackage[T1]{fontenc}
\usepackage{listings,bera}
\usepackage{graphicx}
\usepackage[absolute,overlay]{textpos}
\usepackage{xcolor}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{etoolbox}
\usepackage{tikz}
\usepackage{pifont}

% disables the navigation symbol on the bottom of the screen
\setbeamertemplate{navigation symbols}{}
% disables slide numbers on the bottom of the screen
\setbeamertemplate{footline}{}

%\usecolortheme[rgb={0.1,0.6,0.3}]{structure}

\input{info.tex}


\newcommand{\listingNormal}
{
\lstset
{
  language=C++,
  numbers=left,
  numberstyle=\tiny\color{gray},
  basicstyle=\ttfamily,
  keywordstyle=\color{blue}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  commentstyle=\color{cyan}\ttfamily,
  morecomment=[l][\color{magenta}]{\#},
  showlines=true % do NOT ignore any whitespaces in the file!
}
}


\newcommand{\listingNoLineNum}
{
\lstset{numbers=none}
}



% insImgFr{frame-range}{x}{y}{s}{img}
\newcommand{\insImgFr}[5]
{
  \begin{textblock*}{5cm}(#2\textwidth,#3\textwidth)
    \includegraphics<#1>[scale=#4]{#5}
  \end{textblock*}
}
% insImg{x}{y}{s}{img}
\newcommand{\insImg}[4]
{
  \insImgFr{0-}{#1}{#2}{#3}{#4}
}


% \slide{name}{content}
% pass an empty 'name' to create unnamed slide
\newcommand{\slide}[2]
{
\subsection*{#1}
\begin{frame}
\frametitle{slide#1}
\listingNormal
#2
\end{frame}
}


% \subSlide{name}{content}
% pass an empty 'name' to create unnamed sub-slide
\newcommand{\subSlide}[2]
{
\begin{frame}
\frametitle{slide#1}
\listingNormal
#2
\end{frame}
}


% see http://latexcolor.com for others
\definecolor{celadon}{rgb}{0.67, 0.88, 0.69}
\lstdefinestyle{listingHighlight}{ backgroundcolor=\color{celadon} }
\newcounter{listingHighlightLineCounter}

% \emphLine{fromLine}{toLine}{fileName}
\newcommand{\highlightedListing}[3]
{
  \setcounter{listingHighlightLineCounter}{#1}
  \addtocounter{listingHighlightLineCounter}{-1}

  % when first line is to be highlighted, first section cannot be used
  \ifnumequal{#1}{1}
  {
    \lstinputlisting[belowskip=0pt,
                     linerange={#1-#2},
                     style=listingHighlight,
                     firstnumber=1]
                    {#3}
  }
  {
    \lstinputlisting[belowskip=0pt,
                     linerange={1-\value{listingHighlightLineCounter}}]
                    {#3}
    \lstinputlisting[belowskip=0pt,
                     aboveskip=0pt,
                     linerange={#1-#2},
                     style=listingHighlight,
                     firstnumber=last]
                    {#3}
  }
  \setcounter{listingHighlightLineCounter}{#2}
  \addtocounter{listingHighlightLineCounter}{1}

  \lstinputlisting[aboveskip=0pt,
                   firstline=\the\value{listingHighlightLineCounter},
                   firstnumber=last]
                  {#3}
}
